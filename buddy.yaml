- pipeline: "Build, test"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  ref_type: "BRANCH"
  trigger_condition: "ALWAYS"
  actions:
  - action: "Execute: go build"
    type: "BUILD"
    working_directory: "/src/github.com/haylingsailor/buddytest"
    docker_image_name: "library/golang"
    docker_image_tag: "1.12"
    execute_commands:
    - "export GOPATH=/"
    - "export GO15VENDOREXPERIMENT=1"
    - "go test ./..."
    - "go build ./..."
    mount_filesystem_path: "/src/github.com/haylingsailor/buddytest"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send Email notification"
    type: "EMAIL"
    trigger_time: "ON_FAILURE"
    title: "$BUDDY_PIPELINE_NAME execution #$BUDDY_EXECUTION_ID"
    content: "Oh no! Test failed."
    recipients: "andy.ballingall@gmail.com"
    trigger_condition: "ALWAYS"
  - action: "Send Email notification"
    type: "EMAIL"
    trigger_time: "ON_BACK_TO_SUCCESS"
    title: "$BUDDY_PIPELINE_NAME execution #$BUDDY_EXECUTION_ID"
    content: "Succeeding again!"
    recipients: "andy.ballingall@gmail.com"
    trigger_condition: "ALWAYS"
